#!/usr/bin/env bash

function xrdb_color {
  local query="$1"

  xrdb -query | grep "\*\.${query}:" | cut -f 2
}

mic_muted=$(pulseaudio-ctl full-status | cut -d ' ' -f 3)

if [[ ${mic_muted} == "yes" ]]; then
  bg=$(xrdb_color 'background')
  fg=$(xrdb_color 'color8')

  echo "%{F${fg}}%{B${bg}}  %{B-}%{F-}"
else
  bg=$(xrdb_color 'background')
  fg=$(xrdb_color 'color9')

  echo "%{F${fg}}%{B${bg}}  %{B-}%{F-}"
fi
